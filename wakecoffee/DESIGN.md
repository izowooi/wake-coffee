# Wake Coffee 알람앱 설계 문서

## 📱 프로젝트 개요

Wake Coffee는 일반 직장인과 교대근무자를 위한 특별한 알람앱입니다.

### 주요 특징
- **일반근무 모드**: 출퇴근 시간 기반으로 물 마시기, 스트레칭 등의 알람을 직관적으로 설정
- **교대근무 모드**: 2/3/4교대 패턴에 맞춰 자동으로 알람 스케줄 생성
- **직관적 UI**: 복잡하지 않고 간결한 인터페이스
- **통계 기능**: 알람 준수율 추적

## 🎨 UI 설계

### 전체 앱 구조
- **하단 탭바**: "일반근무" / "교대근무" 두 개의 탭
- **공통 상단바**: 설정 버튼, 통계 보기 버튼

### 일반근무 탭 (타임라인 형식)

```
┌─────────────────────────────┐
│  Wake Coffee    ⚙️  📊      │
├─────────────────────────────┤
│  출근시간: 09:00  퇴근: 18:00│
├─────────────────────────────┤
│                             │
│  08:00 ━━━━━ 출근 전        │
│    💧 물 마시기              │
│                             │
│  09:00 ━━━━━━━━━━━━━━━━   │
│         (근무시작)           │
│                             │
│  10:00 ━━━━━ 근무 중        │
│    🤸 스트레칭               │
│                             │
│  12:00 ━━━━━               │
│    💧 물 마시기              │
│                             │
│  14:00 ━━━━━               │
│    💧 물 마시기              │
│                             │
│  18:00 ━━━━━━━━━━━━━━━━   │
│         (퇴근시간)           │
│                             │
│  19:00 ━━━━━ 퇴근 후        │
│    💊 영양제 먹기             │
│                             │
│   [+ 알람 추가]              │
└─────────────────────────────┘
```

**특징**:
- 세로 타임라인으로 하루를 시각화
- 출근 전/근무 중/퇴근 후가 색상으로 구분
- 각 구간에 + 버튼으로 알람 추가
- 출퇴근 시간은 상단에서 간단히 조정 가능

### 교대근무 탭 (시작일 + 교대 주기)

```
┌─────────────────────────────┐
│  Wake Coffee    ⚙️  📊      │
├─────────────────────────────┤
│  🔄 교대 패턴 설정           │
│                             │
│  교대 유형: [2교대 ▼]        │
│  (2교대/3교대/4교대/커스텀)  │
│                             │
│  시작일: 2025-10-22         │
│  근무시간: 주간 09:00-21:00 │
│          야간 21:00-09:00 │
│                             │
│  📅 다음 7일 스케줄          │
│  ━━━━━━━━━━━━━━━━━━━━━━  │
│  10/22 (화) 🌞 주간         │
│  10/23 (수) 🌞 주간         │
│  10/24 (목) 🌙 야간         │
│  10/25 (금) 🌙 야간         │
│  10/26 (토) ⚪ 휴무         │
│  10/27 (일) ⚪ 휴무         │
│  10/28 (월) 🌞 주간         │
│                             │
│  ━━━━━━━━━━━━━━━━━━━━━━  │
│  근무 중 알람 설정            │
│  ━━━━━━━━━━━━━━━━━━━━━━  │
│  매 2시간마다 💧 물 마시기    │
│  매 3시간마다 🤸 스트레칭     │
│                             │
│   [+ 알람 추가]              │
└─────────────────────────────┘
```

**특징**:
- 교대 유형 선택 (2/3/4교대 프리셋)
- 시작일 선택하면 자동으로 패턴 계산
- 다음 7일 스케줄 미리보기
- 근무일에만 알람이 울리도록 자동 설정
- "근무시작 시간부터" 기준으로 간격 설정

## 🏗️ 아키텍처 설계

### 파일 구조

```
wakecoffee/
├── App/
│   └── wakecoffeeApp.swift
├── Models/
│   ├── Alarm.swift           // 알람 데이터 모델
│   ├── WorkSchedule.swift    // 근무 스케줄 모델
│   └── AlarmStatistics.swift // 통계 모델
├── ViewModels/
│   ├── RegularWorkViewModel.swift  // 일반근무 로직
│   └── ShiftWorkViewModel.swift    // 교대근무 로직
├── Views/
│   ├── MainTabView.swift     // 탭바 컨테이너
│   ├── RegularWork/
│   │   ├── RegularWorkView.swift
│   │   ├── TimelineView.swift
│   │   └── AddAlarmSheet.swift
│   ├── ShiftWork/
│   │   ├── ShiftWorkView.swift
│   │   ├── ShiftPatternSelector.swift
│   │   └── SchedulePreview.swift
│   ├── Settings/
│   │   └── SettingsView.swift
│   └── Statistics/
│       └── StatisticsView.swift
├── Components/
│   ├── AlarmCard.swift       // 재사용 가능한 알람 카드
│   └── TimelineDivider.swift // 타임라인 구분선
├── Services/
│   ├── NotificationManager.swift  // 로컬 알림 관리
│   └── DataManager.swift          // 데이터 저장/로드
└── Utilities/
    ├── Constants.swift
    └── Extensions.swift
```

## 📋 구현 계획

### Phase 1: 기본 구조 및 데이터 모델 (UI 위주)
1. **데이터 모델 생성** - 알람, 근무스케줄, 통계 구조체 정의 (실제 로직 없이 샘플 데이터)
2. **MainTabView 구현** - 하단 탭바 (일반근무/교대근무)
3. **공통 컴포넌트** - AlarmCard, 헤더바 구현

### Phase 2: 일반근무 탭 UI 구현
4. **타임라인 UI 구현** - 세로 스크롤 타임라인 레이아웃
5. **출퇴근 시간 설정 UI** - 상단 시간 선택기
6. **알람 추가 Sheet** - 시간, 목적(아이콘), 반복 요일 선택 UI
7. **알람 카드 디자인** - 타임라인에 표시되는 알람 카드 (수정/삭제 제스처)

### Phase 3: 교대근무 탭 UI 구현
8. **교대 패턴 선택 UI** - 2/3/4교대 Picker
9. **시작일 선택기** - DatePicker
10. **스케줄 프리뷰** - 7일 캘린더 미리보기 (하드코딩된 패턴)
11. **교대근무 알람 추가 UI** - "근무 시작 후 X시간마다" 설정

### Phase 4: 추가 화면 UI
12. **설정 화면** - 앱 설정, 출퇴근 시간 기본값, 알림 권한 안내
13. **통계 화면** - 알람 준수율 차트 (더미 데이터)

### Phase 5: 로직 구현 (UI 완성 후)
14. **ViewModel 구현** - 일반근무/교대근무 비즈니스 로직
15. **NotificationManager** - 실제 로컬 알림 스케줄링
16. **데이터 영속성** - UserDefaults or SwiftData
17. **통계 계산 로직**
18. **교대 패턴 계산 알고리즘**

## 🎯 핵심 기능 요구사항

### 일반근무 모드
- 출퇴근 시간 설정
- 출근 전/근무 중/퇴근 후 구간별 알람 설정
- 반복 요일 선택 (월~금, 커스텀)
- 알람 목적 선택 (물 마시기, 스트레칭, 영양제 등)

### 교대근무 모드
- 2교대/3교대/4교대 프리셋
- 시작일 기반 자동 스케줄 계산
- 근무일에만 알람 활성화
- 근무 시작 시간 기준 간격 설정

### 공통 기능
- 알람 목적별 아이콘
- 알람 준수 통계
- 간결하고 직관적인 UI

## 🎨 디자인 가이드

### 색상 구분
- **출근 전**: 연한 파란색 계열
- **근무 중**: 연한 초록색 계열
- **퇴근 후**: 연한 주황색 계열
- **주간 근무**: 노란색 계열
- **야간 근무**: 보라색 계열
- **휴무**: 회색 계열

### 아이콘 종류
- 💧 물 마시기
- 🤸 스트레칭
- 💊 영양제
- ☕ 커피 브레이크
- 👁️ 눈 운동
- 🚶 산책

## 📝 구현 시 주의사항
- UI는 반드시 직관적이고 간결하게
- 불필요한 설정 옵션은 추가하지 않기
- 각 Phase마다 프리뷰로 UI 확인
- Phase 1~4는 UI 중심, Phase 5에서 로직 구현
